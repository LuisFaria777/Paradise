{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h2>Email Verification</h2>
            <p>Please check your email for a verification link. If you did not receive the email, you can request a new one.</p>
            <form id="resend-email-form" method="post" action="{% url 'email_verification' %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary">Resend Email</button>
            </form>
            <p id="resend-message" class="mt-3"></p>
        </div>
    </div>
</div>

<script>
    document.getElementById('resend-email-form').addEventListener('submit', function(event) {
        event.preventDefault();
        var form = this;

        fetch(form.action, {
            method: form.method,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRFToken': form.querySelector('[name=csrfmiddlewaretoken]').value
            },
        }).then(response => response.json())
          .then(data => {
              document.getElementById('resend-message').innerText = data.message;
          });
    });
</script>
{% endblock content %}
